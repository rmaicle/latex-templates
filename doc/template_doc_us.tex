\documentclass[11pt, letterpaper, titlepage, oneside, openright, final, article]{memoir}
\usepackage[top=1.0in, bottom=1.0in, left=1.0in, right=1.0in, footskip=0.4in, bindingoffset=0.7in]{geometry}

\usepackage{ifxetex,ifluatex}
% Package fixltx2e is not required with releases after 2015.
% All fixes are now in the LaTeX kernel.
% See the latexrelease package for details.
% \usepackage{fixltx2e} % provides \textsubscript

% Must be loaded here. Otherwise an 'Option class for package xcolor'
% error occurs.
% TODO: Determine which option it clashes with.
\usepackage[svgnames]{xcolor}



% Fonts and Encoding
% ------------------

% If system fonts are going to be used, use fontspec.
%\ifxetex
    %\usepackage{fontspec}
    %\defaultfontfeatures{Ligatures=TeX} % To support LaTeX quoting style
    %\setromanfont{Noto Serif}
    %\setmainfont{}
%\fi

% Chapter 9: Fonts, LaTeX Wikibooks, June 2016
% If you do not have a specific font encoding issue (e.g. writing English
% only), there is no need for T1. Sticking to the default font encoding is
% not a problem.
%
% To be able to use other TeX fonts, make sure T1 encoding is used.
\usepackage[T1]{fontenc}
\usepackage[utf8]{inputenc}
% Provides euro and other symbols
% https://en.wikibooks.org/wiki/LaTeX/Special_Characters
\usepackage{textcomp}

% Serif fonts
% -----------
\usepackage{charter}                        % {bch} *****
% Used only to display sample text
%\usepackage{lmodern}
\usepackage{times}                          % {ptm}
%\usepackage{palatino}                       % {ppl}
%\usepackage{noto}
%\usepackage{bookman}                        % {pbk}
%\usepackage{concrete}                       % beton.sty not found
%\usepackage{pslatex}
%\usepackage{newcent}                        % {pnc}
%\usepackage{kpfonts}
%\usepackage{utopia}                         % {put}
%\usepackage{pandora}                        % error on roman font

% Sans-serif fonts
% ----------------
\usepackage[scaled=0.92]{helvet}            % {phv}
% Used only to display sample text
% \usepackage[scaled=0.85]{berasans}          % {fvs}
%\usepackage{cmbright}
%\usepackage{kurier}
%\usepackage{sourcesanspro}

% Typewriter fonts
% ----------------
% \usepackage[scaled=0.85]{beramono}          % {fvm}
\usepackage[scaled=0.86]{beramono}          % {fvm}
% Used only to display sample text
\usepackage[varl,scaled=1.0]{zi4}           % Inconsolata typewriter font
%\usepackage[scaled=0.95]{sourcecodepro}

% Make default fonts
% ------------------
\renewcommand*\rmdefault{bch}               % Charter - I don't like how the italic looks'
%\renewcommand*\rmdefault{ppl}               % Palatino
%\renewcommand*\rmdefault{put}               % Utopia - Taller and a bit wider than Bitstream Charter'
%\renewcommand*\rmdefault{ptm}               % Times
%\renewcommand*\rmdefault{pbk}               % Bookman
%\renewcommand*\rmdefault{pnc}               % New Centurey Schoolbook

%\renewcommand*\sfdefault{lmss}              % Latin modern sans serif
%\renewcommand*\sfdefault{cmss}
\renewcommand*\sfdefault{phv}

%\renewcommand*\ttdefault{zi4}               % Inconsolata *****
\renewcommand*\ttdefault{fvm}               % Bera mono
%\renewcommand*\ttdefault{cmtt}              % Computer Modern Typewriter
%\renewcommand*\ttdefault{lmtt}              % Latin Modern Typewriter

% Change the default font
% https://stackoverflow.com/questions/877597/how-do-you-change-the-document-font-in-latex
% \renewcommand{\familydefault}{\sfdefault}



% Paragraph
% =========

% No indention
\setlength{\parindent}{0em}
% No vertical spacing between paragraphs
\setlength{\parskip}{1em}



% Hyperlinks
% ==========

\usepackage[colorlinks=true]{hyperref}
\hypersetup{
    $if(title-meta)$
        pdftitle={$title-meta$},
    $endif$
    $if(author-meta)$
        pdfauthor={$author-meta$},
    $endif$
    $if(keywords)$
        pdfkeywords={$for(keywords)$$keywords$$sep$, $endfor$},
    $endif$
    $if(colorlinks)$
        colorlinks=true,
        linkcolor=$if(linkcolor)$$linkcolor$$else$Maroon$endif$,
        citecolor=$if(citecolor)$$citecolor$$else$Blue$endif$,
        urlcolor=$if(urlcolor)$$urlcolor$$else$Blue$endif$,
    $else$
        pdfborder={0 0 0},
    $endif$
    breaklinks=true
}
% Don't use monospace font for urls
\urlstyle{same}



% Fancy Verbatim
% fancyvrb is automatically loaded here after \hypersetup.
% DO NOT load the package manually
% ================================

%$if(highlighting-macros)$
%    $highlighting-macros$
%$endif$



% Graphics
% ========

\usepackage{graphicx,grffile}
\makeatletter
\def\maxwidth{\ifdim\Gin@nat@width>\linewidth\linewidth\else\Gin@nat@width\fi}
\def\maxheight{\ifdim\Gin@nat@height>\textheight\textheight\else\Gin@nat@height\fi}
\makeatother
% Scale images if necessary, so that they will not overflow the page
% margins by default, and it is still possible to overwrite the defaults
% using explicit options in \includegraphics[width, height, ...]{}
\setkeys{Gin}{width=\maxwidth,height=\maxheight,keepaspectratio}



% Source Code Listings
% ====================

$if(listings)$
    \usepackage{listings}
    % Package listings require fancyvrb right now.
    %
    % When --listings argument is passed to pandoc, all code blocks will be
    % wrapped within the listings environment.
    \usepackage{fancyvrb}
    \definecolor{Gray99}{RGB}{252,252,252}
    \lstset{
        fancyvrb=true,
        aboveskip=1em,
        belowskip=1em,
        basicstyle=\small\ttfamily,
        %basicstyle=\normalsize\ttfamily,
        fontadjust=true,
        %columns=fixed,              % compress character spaces
        %basewidth={0.5em, 0.5em},   %   by this much
        breakatwhitespace=true,
        columns=fullflexible,
        keepspaces=true,
        showstringspaces=false,
        keywordstyle=\color{NavyBlue},
        linewidth=\textwidth,
        %otherkeywords={*,std,main}
    }
    \lstset{
        numberstyle=\normalsize\ttfamily,
        numbersep=10pt
    }
    % Frame and background
    \lstset{
        xleftmargin=7pt,            % move listing display to the right
        frame=single,
        frameround=tttt,
        framesep=2.5pt,
        framerule=0.1pt,
        framextopmargin=3pt,
        framexbottommargin=2pt,
        framexleftmargin=5pt,
        framexrightmargin=5pt,
        rulecolor=\color{Gainsboro},
        rulesepcolor=\color{Gray99},
        backgroundcolor=\color{Gray99},
    }
    \newcommand{\passthrough}[1]{#1}
$else$
    % When --listings argument is not passed to pandoc, we change all
    % code block font sizes.
    % How to set font size for all verbatims in Beamer presentation?
    % https://tex.stackexchange.com/a/133443
    %
    % \makeatletter
    % \def\verbatim@font{\small\ttfamily}
    % \makeatother
    %
    % Change verbatim environment font
    % 15.3 Verbatim (memoir class documentation)
    %\setverbatimfont{\ttfamily\small}
    \setverbatimfont{\ttfamily\normalsize}
    % Because fancyvrb package was loaded automatically and the following environment was
    % defined when there is no --listing argument to pandoc, we "re-define" the environment
    % to change the font size.
    \DefineVerbatimEnvironment{Highlighting}{Verbatim}{
        commandchars=\\\{\},
        xleftmargin=6.7mm,
        xrightmargin=0mm,
        numbersep=8pt,
        %fontsize=\small,
        fontsize=\normalsize,
        baselinestretch=1.0,
        showstringspaces=false,
    }
        % Disable: not for production use
        %frame=single,
        %rulecolor=\color{LightGray},
    %}

    % "Re-define theFancyVerbLine to use a different font and size.
    % See the fancyvrb package documentation for the original definition."
    \def\theFancyVerbLine{\color{gray}\ttfamily\small\arabic{FancyVerbLine}}
    \renewcommand*{\PreprocessorTok}[1]    {\textcolor{MediumVioletRed}{#1}}
    \renewcommand*{\CommentTok}[1]         {\textcolor{DarkGreen}{#1}}
    \renewcommand*{\StringTok}[1]          {\textcolor{SaddleBrown}{#1}}
    \renewcommand*{\KeywordTok}[1]         {\textcolor{DarkBlue}{#1}}
    \renewcommand*{\DataTypeTok}[1]        {\textcolor{Blue}{#1}}
    \renewcommand*{\ControlFlowTok}[1]     {\textcolor{OrangeRed}{#1}}
    \renewcommand*{\DecValTok}[1]          {\textcolor{Black}{#1}}

    %\renewcommand*{\KeywordTok}[1]         {\textcolor[rgb]{0.25,0.44,0.63}{#1}}
    %\renewcommand*{\DataTypeTok}[1]        {\textcolor[rgb]{0.56,0.13,0.00}{#1}}
    %\renewcommand*{\DecValTok}[1]          {\textcolor[rgb]{0.25,0.63,0.44}{#1}}
    %\renewcommand*{\BaseNTok}[1]           {\textcolor[rgb]{0.25,0.63,0.44}{#1}}
    %\renewcommand*{\FloatTok}[1]           {\textcolor[rgb]{0.25,0.63,0.44}{#1}}
    %\renewcommand*{\ConstantTok}[1]        {\textcolor[rgb]{0.53,0.00,0.00}{#1}}
    %\renewcommand*{\CharTok}[1]            {\textcolor[rgb]{0.25,0.44,0.63}{#1}}
    %\renewcommand*{\SpecialCharTok}[1]     {\textcolor[rgb]{0.25,0.44,0.63}{#1}}
    %\renewcommand*{\StringTok}[1]          {\textcolor[rgb]{0.73,0.40,0.53}{#1}}
    %\renewcommand*{\VerbatimStringTok}[1]  {\textcolor[rgb]{0.25,0.44,0.63}{#1}}
    %\renewcommand*{\SpecialStringTok}[1]   {\textcolor[rgb]{0.73,0.40,0.53}{#1}}
    %\renewcommand*{\ImportTok}[1]          {#1}
    %\renewcommand*{\CommentTok}[1]         {\textcolor[rgb]{0.38,0.63,0.69}{#1}}
    %\renewcommand*{\DocumentationTok}[1]   {\textcolor[rgb]{0.73,0.13,0.13}{#1}}
    %\renewcommand*{\AnnotationTok}[1]      {\textcolor[rgb]{0.38,0.63,0.69}{#1}}
    %\renewcommand*{\CommentVarTok}[1]      {\textcolor[rgb]{0.38,0.63,0.69}{#1}}
    %\renewcommand*{\OtherTok}[1]           {\textcolor[rgb]{0.00,0.44,0.13}{#1}}
    %\renewcommand*{\FunctionTok}[1]        {\textcolor[rgb]{0.02,0.16,0.49}{#1}}
    %\renewcommand*{\VariableTok}[1]        {\textcolor[rgb]{0.10,0.09,0.49}{#1}}
    %\renewcommand*{\ControlFlowTok}[1]     {\textcolor[rgb]{0.00,0.44,0.13}{#1}}
    %\renewcommand*{\OperatorTok}[1]        {\textcolor[rgb]{0.40,0.40,0.40}{#1}}
    %\renewcommand*{\BuiltInTok}[1]         {#1}
    %\renewcommand*{\ExtensionTok}[1]       {#1}
    %\renewcommand*{\PreprocessorTok}[1]    {\textcolor[rgb]{0.74,0.48,0.00}{#1}}
    %\renewcommand*{\AttributeTok}[1]       {\textcolor[rgb]{0.49,0.56,0.16}{#1}}
    %\renewcommand*{\RegionMarkerTok}[1]    {#1}
    %\renewcommand*{\InformationTok}[1]     {\textcolor[rgb]{0.38,0.63,0.69}{#1}}
    %\renewcommand*{\WarningTok}[1]         {\textcolor[rgb]{0.38,0.63,0.69}{#1}}
    %\renewcommand*{\AlertTok}[1]           {\textcolor[rgb]{1.00,0.00,0.00}{#1}}
    %\renewcommand*{\ErrorTok}[1]           {\textcolor[rgb]{1.00,0.00,0.00}{#1}}
    %\renewcommand*{\NormalTok}[1]          {#1}
$endif$



% Footnotes
% =========

% Fix footnotes in tables (requires footnote package)
\usepackage{footnote}
\makesavenoteenv{longtable}
% Change footnote font size
\renewcommand{\footnotesize}{\small}
% Make links footnotes instead of hotlinks
\DeclareRobustCommand{\href}[2]{#2\footnote{\url{#1}}}
% Add space before the footnote number in texts.
\renewcommand{\thefootnote}{\space\arabic{footnote}}
% Set vertical space between bottom of page text and start of footnote.
\setfootins{8mm plus 4mm minus 2mm}{8mm plus 4mm minus 2mm}
\renewcommand{\footnotesep}{9pt}
% Redefine footnote rule
% length=1.5in, rule thickness is 0.03pt and a vertical space of 2ex between
% the rule and the first entry in the footnote
\renewcommand{\footnoterule}{\noindent\rule{1.5in}{0.03pt}\vspace{1ex}}
\makeatletter
\renewcommand\@makefntext[1]{\makebox[13pt][r]{\bfseries\@thefnmark.\,\,\,}#1}
\makeatother



% Other Packages
% ==============

\usepackage{makeidx}

$if(lang)$
    \ifnum 0\ifxetex 1\fi\ifluatex 1\fi=0 % if pdftex
        \usepackage[shorthands=off,$for(babel-otherlangs)$$babel-otherlangs$,$endfor$main=$babel-lang$]{babel}
    $if(babel-newcommands)$
        $babel-newcommands$
    $endif$
    \else
        % load polyglossia as late as possible as it *could* call bidi if RTL lang (e.g. Hebrew or Arabic)
        \usepackage{polyglossia}
        \setmainlanguage[$polyglossia-lang.options$]{$polyglossia-lang.name$}
    $for(polyglossia-otherlangs)$
        \setotherlanguage[$polyglossia-otherlangs.options$]{$polyglossia-otherlangs.name$}
    $endfor$
    \fi
$endif$

% Base direction of the document, either `rtl` (right-to-left) or `ltr`
% (left-to-right). Pandoc: When using LaTeX for bidirectional documents, only
% the `xelatex` engine is fully supported (use `--latex-engine=xelatex`).
$if(dir)$
    \ifxetex
        % load bidi as late as possible as it modifies e.g. graphicx
        $if(latex-dir-rtl)$
            \usepackage[RTLdocument]{bidi}
        $else$
            \usepackage{bidi}
        $endif$
    \fi
    \ifnum 0\ifxetex 1\fi\ifluatex 1\fi=0 % if pdftex
        \TeXXeTstate=1
        \newcommand{\RL}[1]{\beginR #1\endR}
        \newcommand{\LR}[1]{\beginL #1\endL}
        \newenvironment{RTL}{\beginR}{\endR}
        \newenvironment{LTR}{\beginL}{\endL}
    \fi
$endif$

% Using memoir class with fancyhdr may get compilation errors because both
% define the \footruleskip command when loading. To avoid the error, the
% command needs to be 'undefined' before fancyhdr is loaded but after memoir
% has been loaded.
% Ref: fancyhdr and memoir
%      http://tex.stackexchange.com/questions/37868/ddg#37880
\let\footruleskip\undefined
\usepackage{fancyhdr}

\usepackage[nopar]{lipsum}

\usepackage{amssymb,amsmath}

% Use upquote if available, for straight quotes in verbatim environments.
% Must be loaded after other fonts.
\usepackage{upquote}

% Allow verbatim texts in footnotes
% Error: Undefined control sequence
% \VerbatimFootnotes

%\usepackage{microtype}
%\UseMicrotypeSet[protrusion]{basicmath} % disable protrusion for tt fonts

% \usepackage[option]{setspace}
% options:
%   singlespacing
%   onehalfspacing
%   doublespacing
%
% For the need of a different stretching factor, the spacing environment is
% provided. It may be used like the following:
%
% \begin{spacing}{2.4}
% This text is stretched by a factor of 2.4.
% \end{spacing}
\usepackage{setspace}
%\setstretch{$linestretch$}
\linespread{1}

\usepackage{longtable,booktabs}

% Strikeout a section of text with a horizontal line
\usepackage[normalem]{ulem}
% Avoid problems with \sout in headers with hyperref:
\pdfstringdefDisableCommands{\renewcommand{\sout}{}}



% Settings
% ========

% Traditional typography requires a larger space to indicate the end of a
% sentence. Following along the same logic, TEX puts more space after an
% exclamation point (!), and a question mark (?). However, this tradition
% is obsolete as this extra space is disturbing. So you should almost always
% execute \frenchspacing just before the beginning of every document,
% instructing TEX to treat commas and periods in the same way.
% (Latex Manual 8.6)
% -----------------------------------------------------------------------------
\frenchspacing

% Prevent overfull lines
\setlength{\emergencystretch}{3em}

% Tight lists
\providecommand{\tightlist}{%
    \setlength{\itemsep}{0pt}\setlength{\parskip}{0pt}
}

% Change list bullet characters
%\renewcommand{\labelitemi}{\ding{42}}
%\renewcommand{\labelitemii}{\ding{43}}
%\renewcommand{\labelitemiii}{\ding{44}}
%\renewcommand{\labelitemiv}{\ding{45}}

% Italicize text in quote environments
% The original code here was taken from memoir.cls in
% /usr/share/texmf-dist/tex/latex/memoir/
\renewenvironment*{quote}%
                  {\list{}{\rightmargin\leftmargin}%
                   \itshape\item[]}%
                  {\endlist}

% Figure placement
%
% The [htbp] controls where the table or figure is placed.
% Tables and figures do not need to go where you put them in
% the text. L A TEX moves them around to prevent large areas of
% white space from appearing in your paper.
%
% Each letter corresponds to a place where the table or figure
% should go:
%     b (Bottom)   Place the table at the bottom of the current page.
%     h (Here)     Place the table at the spot where the table environment
%                  appears in the text
%     p (Page)     Place the table at the top of the next page.
%     t (Top)      Place the table at the top of the current page.
%
% The first letter inside brackets has highest priority. In the example on the
% previous page, if L A TEX couldn’t put the table or figure "here", it tried
% to put it at the top of the current page, then on the bottom of the current
% page, then at the top of the next page.
% ---
% Ref: Figures and Tables in a LATEX Document
%      http://web.mit.edu/molly/Public/rsi2006/figtab.pdf
%
% Set default figure placement to htbp
\makeatletter
%
%\def\fps@figure{htbp}
%
% Prevent text from creeping between figures
%
% In the above example, text would be written underneath the floats if one
% uses the [!htb] float specifier. \clearpage flushes all pending % floats,
% setting them on their own pages, before starting the new sectional content.
% ---
% Ref: How to prevent text from creeping in between figures and tables
%      https://stackoverflow.com/a/23166245
%\def\fps@figure{!hbp}
\def\fps@figure{!h}
\makeatother

% Table of contents
% -----------------
\settocdepth{subsection}
\renewcommand{\cftchapterfont}{\large\bfseries}
\renewcommand{\cftsectionfont}{\large}
\renewcommand{\cftsubsectionfont}{\large}
\setlength{\cftsectionindent}{2.1em}
\setlength{\cftsubsectionindent}{5.6em}
\setlength{\cftchapternumwidth}{2.0em}
\setlength{\cftsectionnumwidth}{3.5em}
\setlength{\cftsubsectionnumwidth}{4.9em}
\setlength{\cftbeforechapterskip}{1.0em}
\setlength{\cftbeforesectionskip}{0.2em}
\setlength{\cftbeforesubsectionskip}{0.2em}

% Chapter style
% -------------
% Ref: How do fonts work in LaTeX?
%      https://tex.stackexchange.com/questions/338049/
\makechapterstyle{negerns}{
    \setlength{\beforechapskip}{11pt}
    \setlength{\afterchapskip}{11pt}
    \renewcommand{\printchaptername}{}
    \renewcommand{\chapternamenum}{}
    \renewcommand*{\printchapternum}{%
        \ifanappendix
            \chapnumfont \appendixname\space\thechapter\\%
        \else%
            \chapnumfont \thechapter\space\space\space\space%
        \fi%
    }
    \renewcommand*{\chapnumfont}{\fontsize{15pt}{18pt}\usefont{T1}{bch}{b}{n}}
    \renewcommand*{\chaptitlefont}{\fontsize{15pt}{18pt}\usefont{T1}{bch}{b}{n}}
    % The following commands concatenate the chapter number and chapter title
    \renewcommand*{\printchaptertitle}[1]{\chaptitlefont ##1}
    \renewcommand{\afterchapternum}{}

    % Note on using \nopagebreak instead of \nobreak
    % https://tex.stackexchange.com/questions/94217
    % Using 2pt just because the chapter title uses 2pt font size
    % bigger than the section title
    \renewcommand\afterchaptertitle{\par\nopagebreak\vspace{2pt}}
}
\chapterstyle{negerns}
\setsecheadstyle{\fontsize{14pt}{16.8pt}\usefont{T1}{bch}{b}{n}}
\setsubsecheadstyle{\fontsize{13pt}{15.6pt}\usefont{T1}{bch}{b}{n}}
\setsubsubsecheadstyle{\fontsize{12pt}{14.4pt}\usefont{T1}{bch}{b}{n}}
\setsecnumdepth{subsubsection}



%\makeindex



% =============================================================================
% Begin document
% =============================================================================



\begin{document}

% Title uses titlex in YAML matter in markdown file.
%
% The \usefont usage was from Fonts and Encoding chapter of the
% The LaTeX companion, 2nd Ed, 2004, p. 371.
% -----
$if(title)$
    \ifpdf
        \pdfbookmark{Title Page}{$title$}
    \fi
    \newlength{\centeroffset}
    \thispagestyle{empty}
    \vspace*{2.0in}
    \begin{flushleft}
        {
            {\fontsize{20pt}{24pt}\usefont{T1}{ptm}{b}{n}$title$}
            $if(subtitle)$
                {\\\fontsize{18pt}{21.6pt}\usefont{T1}{ptm}{m}{n}$subtitle$}
            $endif$
        }
        % The vertical space below the rule is the same height
        % as the subtitle font size
        \noindent\rule[-1.2pt]{\textwidth}{.1pt}

        {\fontsize{12pt}{14.4pt}\usefont{T1}{ptm}{m}{n}$version$}\\[0.05in]
        {\fontsize{12pt}{14.4pt}\usefont{T1}{ptm}{m}{n}$date$}\\[0.05in]

        % $if(client)$
        %     {\fontsize{14pt}{22pt}\usefont{T1}{ptm}{b}{n}$client$}
        % $endif$

        % Add a vertical fill so the items below are pushed down to the
        % bottom of the page.
        % https://latex.org/forum/viewtopic.php?t=13428
        % Use \vfill or \vspace*{\fill}:
        \vspace*{\fill}

        $for(author)$
            $if(author.name)$
                {\fontsize{12pt}{14.4pt}\usefont{T1}{ptm}{b}{n}$author.name$}
                $if(author.email)$
                    {\\[0.05in]\fontsize{12pt}{14.4pt}\usefont{T1}{ptm}{m}{n}$author.email$}
                $endif$
            $endif$
        $endfor$

        % Vertical space so the authors do not move to the bottom of the page
        % when there is no distribution text below.
        \vspace*{0.5in}

        $if(distribution)$
            {\fontsize{11pt}{13.2pt}\usefont{T1}{ptm}{m}{n}$distribution$}
        $endif$
    \end{flushleft}
$endif$

\frontmatter
% Half title page
%\copyright
% Dedication page
% Other preliminaries

%$for(include-before)$
%$include-before$
%$endfor$

%
% Copyright
%
\thispagestyle{empty}
\begin{flushleft}
    {\bfseries $title$}
    $if(subtitle)$
        {\\\itshape $subtitle$}
    $endif$
    $if(version)$
        \normalsize $version$\\
    $endif$
    $if(author)$
        % For multiple authors
        % \normalsize by\\
        % $for(author)$
        %     \normalsize $author.name$\\
        % $endfor$

        % For single author
        \normalsize by $for(author)$$author.name$$endfor$
        \vspace*{1em}
    $endif$

    \vspace*{1.5em}

    \includegraphics[keepaspectratio=true, width=2.5cm]{cc_by_nc_sa_40.eps}\\[1.2em]
    $if(copyright)$
        \normalsize Copyright \textcopyright\space $copyright$\\[1.2em]
    $endif$
    $if(license_text)$
        {\normalsize $license_text$}
        $if(license_link)$
            {\normalsize To view a copy of this license, visit: \url{$license_link$}.}
        $endif$
        \\[1.2em]
    $endif$
    $if(license_attribution)$
        \normalsize {\bfseries Attribution}\textemdash $license_attribution$\\[1.2em]
    $endif$
    $if(license_translations)$
        \normalsize {\bfseries Translations}\textemdash $license_translations$\\[1.2em]
    $endif$
    $if(license_adaptations)$
        \normalsize {\bfseries Adaptationss}\textemdash $license_adaptations$\\[1.2em]
    $endif$
    $if(source)$
        \normalsize $source$\\[1.2em]
    $endif$

    \ifxetex
        \normalsize This PDF is generated using XeTeX \the\eTeXversion\eTeXrevision-\the\XeTeXversion\XeTeXrevision\space on \today.
    \else
        \normalsize This PDF is generated using pdfTeX \the\eTeXversion\eTeXrevision-\the\pdftexversion.\pdftexrevision\space on \today.
    \fi
%}
%\%end{minipage}}
\end{flushleft}
\pagebreak

% Start a new recto page
\cleardoublepage

%
% Table of contents
%
$if(toc)$
{
    \settocdepth{subsection}
    \cleardoublepage
    \begin{KeepFromToc} % Hide the ToC page entry in the ToC
        \tableofcontents
    \end{KeepFromToc}
    \pagebreak
    \cleardoublepage
}
$endif$

\chapter*{Preface}
\addcontentsline{toc}{chapter}{Preface}

\hypertarget{conventions}{%
\section{Conventions Used}\label{conventions}}

The following typographical conventions are used in this document:

\begin{description}
%\tightlist
\item[\textnormal{\textit{Italic}}]\hfill \\
Indicates new terms, URLs, email addresses, filenames, and file
extensions.

\item[\textnormal{\texttt{Constant width}}]\hfill \\
Used for program listings as well as within paragraphs to refer to
program elements such as variable or function names, databases, data
types, environment variables, statements, and keywords.

\item[\textbf{\texttt{Constant width bold}}]\hfill \\
Shows commands or other text that should be typed literally by the user.

\item[\textnormal{\texttt{\textit{Constant width italic}}}]\hfill \\
Shows text that should be replaced with user-supplied values or by
values determined by context.
\end{description}

$if(lot)$
    \listoftables
$endif$

$if(lof)$
    \listoffigures
$endif$

% Longer preliminaries
% Foreword

%\acknowledgements

%\pagenumbering{arabic}
\mainmatter
$body$

\appendix

\backmatter

$if(natbib)$
    $if(bibliography)$
        $if(biblio-title)$
            $if(book-class)$
                \renewcommand\bibname{$biblio-title$}
            $else$
                \renewcommand\refname{$biblio-title$}
            $endif$
        $endif$
        \bibliography{$for(bibliography)$$bibliography$$sep$,$endfor$}
    $endif$
$endif$

$if(biblatex)$
    \printbibliography$if(biblio-title)$[title=$biblio-title$]$endif$
$endif$

%$for(include-after)$
%$include-after$
%$endfor$

%\printindex

\end{document}

% =============================================================================
% End document
% =============================================================================
