\documentclass[8pt, a5paper, titlepage, twoside, openright, draft]{memoir}
\usepackage[top=0.80in, bottom=0.75in, left=0.5in, right=0.5in, footskip=0.3in, bindingoffset=0.5in]{geometry}

\usepackage[svgnames]{xcolor}

\usepackage{ifxetex,ifluatex}
\usepackage{fixltx2e} % provides \textsubscript

% System fonts
% ------------
% If system fonts are going to be used, use fontspec.
%
%\ifxetex
    %\usepackage{fontspec}
    %\defaultfontfeatures{Ligatures=TeX} % To support LaTeX quoting style
    %\setromanfont{Noto Serif}
    %\setmainfont{}
%\fi

% Chapter 9: Fonts, LaTeX Wikibooks, June 2016
% If you do not have a specific font encoding issue (e.g. writing English
% only), there is no need for T1. Sticking to the default font encoding is
% not a problem.
%
% To be able to use other TeX fonts, make sure T1 encoding is used.
\usepackage[T1]{fontenc}
\usepackage[utf8]{inputenc}
%\usepackage{textcomp} % provides euro and other symbols

% Serif fonts
% -----------
%\usepackage{lmodern}
\usepackage{times}                          % {ptm}
%\usepackage{palatino}                       % {ppl}
%\usepackage{charter}                        % {bch} *****
%\usepackage{bookman}                        % {pbk}
%\usepackage{concrete}                       % beton.sty not found
%\usepackage{pslatex}
%\usepackage{newcent}                        % {pnc}
%\usepackage{kpfonts}
%\usepackage{pandora}                        % error on roman font
%
% 'default' option sets the default
% font family to Source Sans Pro, not \sfdefault.
%
%\usepackage[default]{sourcesanspro}

% Sans-serif fonts
% ----------------
%\usepackage{berasans}
\usepackage[scaled=0.92]{helvet}            % {phv}
%\usepackage{cmbright}
%\usepackage{kurier}

% Typewriter fonts
% ----------------
\usepackage[scaled=0.85]{beramono}          % {fvm}
\usepackage[varl,scaled=1.02]{zi4}          % inconsolata typewriter font
%\usepackage[scaled=0.95]{sourcecodepro}

% Make default font
% -----------------
%\renewcommand*\rmdefault{ptm}               % Times
\renewcommand*\rmdefault{ppl}               % Palatino
%\renewcommand*\rmdefault{bch}               % Charter - I don't like how the italic looks'
\renewcommand*\sfdefault{cmss}
\renewcommand*\ttdefault{fvm}               % Bera mono
%\setmonofont[Scale=0.9]{Negerns Courier}

$if(linestretch)$
\usepackage{setspace}
\setstretch{$linestretch$}
$endif$

\usepackage{amssymb,amsmath}

%\ifnum 0\ifxetex 1\fi\ifluatex 1\fi=0 % if pdftex
%  \usepackage[$if(fontenc)$$fontenc$$else$T1$endif$]{fontenc}
%  \usepackage[utf8]{inputenc}
%  \usepackage{textcomp} % provides euro and other symbols
%\else % if luatex or xelatex
%$if(mathspec)$
%  \ifxetex
%    \usepackage{mathspec}
%  \else
%    \usepackage{unicode-math}
%  \fi
%$else$
%  \usepackage{unicode-math}
%$endif$
%  \defaultfontfeatures{Ligatures=TeX,Scale=MatchLowercase}
%$for(fontfamilies)$
%  \newfontfamily{$fontfamilies.name$}[$fontfamilies.options$]{$fontfamilies.font$}
%$endfor$
%$if(mainfont)$
%    \setmainfont[$for(mainfontoptions)$$mainfontoptions$$sep$,$endfor$]{$mainfont$}
%$endif$
%$if(sansfont)$
%    \setsansfont[$for(sansfontoptions)$$sansfontoptions$$sep$,$endfor$]{$sansfont$}
%$endif$
%$if(monofont)$
%    \setmonofont[Mapping=tex-ansi$if(monofontoptions)$,$for(monofontoptions)$$monofontoptions$$sep$,$endfor$$endif$]{$monofont$}
%$endif$
%$if(mathfont)$
%$if(mathspec)$
%  \ifxetex
%    \setmathfont(Digits,Latin,Greek)[$for(mathfontoptions)$$mathfontoptions$$sep$,$endfor$]{$mathfont$}
%  \else
%    \setmathfont[$for(mathfontoptions)$$mathfontoptions$$sep$,$endfor$]{$mathfont$}
%  \fi
%$else$
%  \setmathfont[$for(mathfontoptions)$$mathfontoptions$$sep$,$endfor$]{$mathfont$}
%$endif$
%$endif$
%$if(CJKmainfont)$
%  \ifxetex
%    \usepackage{xeCJK}
%    \setCJKmainfont[$for(CJKoptions)$$CJKoptions$$sep$,$endfor$]{$CJKmainfont$}
%  \fi
%$endif$
%$if(luatexjapresetoptions)$
%  \ifluatex
%    \usepackage[$for(luatexjapresetoptions)$$luatexjapresetoptions$$sep$,$endfor$]{luatexja-preset}
%  \fi
%$endif$
%$if(CJKmainfont)$
%  \ifluatex
%    \usepackage[$for(luatexjafontspecoptions)$$luatexjafontspecoptions$$sep$,$endfor$]{luatexja-fontspec}
%    \setmainjfont[$for(CJKoptions)$$CJKoptions$$sep$,$endfor$]{$CJKmainfont$}
%  \fi
%$endif$
%\fi

% use upquote if available, for straight quotes in verbatim environments
\IfFileExists{upquote.sty}{\usepackage{upquote}}{}
% use microtype if available
\IfFileExists{microtype.sty}{%
\usepackage[$for(microtypeoptions)$$microtypeoptions$$sep$,$endfor$]{microtype}
\UseMicrotypeSet[protrusion]{basicmath} % disable protrusion for tt fonts
}{}

$if(verbatim-in-note)$
\usepackage{fancyvrb}
$endif$
$if(colorlinks)$
\usepackage{xcolor}
$endif$
%
% Use final=true so we could see the hyperlinks
%
\usepackage[final=true,colorlinks=true,linkcolor=red]{hyperref}
\hypersetup{
$if(title-meta)$
            pdftitle={$title-meta$},
$endif$
$if(author-meta)$
            pdfauthor={$author-meta$},
$endif$
$if(keywords)$
            pdfkeywords={$for(keywords)$$keywords$$sep$, $endfor$},
$endif$
$if(colorlinks)$
            colorlinks=true,
            linkcolor=$if(linkcolor)$$linkcolor$$else$Maroon$endif$,
            citecolor=$if(citecolor)$$citecolor$$else$Blue$endif$,
            urlcolor=$if(urlcolor)$$urlcolor$$else$Blue$endif$,
$else$
            pdfborder={0 0 0},
$endif$
            breaklinks=true}
%\urlstyle{same}  % don't use monospace font for urls
$if(verbatim-in-note)$
\VerbatimFootnotes % allows verbatim text in footnotes
$endif$
%$if(geometry)$
%\usepackage[$for(geometry)$$geometry$$sep$,$endfor$]{geometry}
%\usepackage[top=1.0in, bottom=1.25in, left=0.5in, right=0.5in, footskip=0.6in, bindingoffset=0.5in]{geometry}
%$endif$
$if(listings)$
\usepackage{listings}
\newcommand{\passthrough}[1]{#1}
$endif$
$if(lhs)$
\lstnewenvironment{code}{\lstset{language=Haskell,basicstyle=\small\ttfamily}}{}
$endif$
$if(highlighting-macros)$
$highlighting-macros$
$endif$
%$if(tables)$
\usepackage{longtable,booktabs}
% Fix footnotes in tables (requires footnote package)
\IfFileExists{footnote.sty}{\usepackage{footnote}\makesavenoteenv{longtable}}{}
%$endif$
%$if(graphics)$
\usepackage{graphicx,grffile}
\makeatletter
\def\maxwidth{\ifdim\Gin@nat@width>\linewidth\linewidth\else\Gin@nat@width\fi}
\def\maxheight{\ifdim\Gin@nat@height>\textheight\textheight\else\Gin@nat@height\fi}
\makeatother
% Scale images if necessary, so that they will not overflow the page
% margins by default, and it is still possible to overwrite the defaults
% using explicit options in \includegraphics[width, height, ...]{}
\setkeys{Gin}{width=\maxwidth,height=\maxheight,keepaspectratio}
%$endif$
$if(links-as-notes)$
% Make links footnotes instead of hotlinks:
\DeclareRobustCommand{\href}[2]{#2\footnote{\url{#1}}}
$endif$
$if(strikeout)$
\usepackage[normalem]{ulem}
% avoid problems with \sout in headers with hyperref:
\pdfstringdefDisableCommands{\renewcommand{\sout}{}}
$endif$
\setlength{\emergencystretch}{3em}  % prevent overfull lines
\providecommand{\tightlist}{%
  \setlength{\itemsep}{0pt}\setlength{\parskip}{0pt}}
$if(numbersections)$
\setcounter{secnumdepth}{$if(secnumdepth)$$secnumdepth$$else$5$endif$}
$else$
\setcounter{secnumdepth}{0}
$endif$
$if(beamer)$
$else$
$if(subparagraph)$
$else$
% Redefines (sub)paragraphs to behave more like sections
\ifx\paragraph\undefined\else
\let\oldparagraph\paragraph
\renewcommand{\paragraph}[1]{\oldparagraph{#1}\mbox{}}
\fi
\ifx\subparagraph\undefined\else
\let\oldsubparagraph\subparagraph
\renewcommand{\subparagraph}[1]{\oldsubparagraph{#1}\mbox{}}
\fi
$endif$
$endif$

% set default figure placement to htbp
\makeatletter
\def\fps@figure{htbp}
\makeatother

$for(header-includes)$
$header-includes$
$endfor$
$if(lang)$
\ifnum 0\ifxetex 1\fi\ifluatex 1\fi=0 % if pdftex
  \usepackage[shorthands=off,$for(babel-otherlangs)$$babel-otherlangs$,$endfor$main=$babel-lang$]{babel}
$if(babel-newcommands)$
  $babel-newcommands$
$endif$
\else
  % load polyglossia as late as possible as it *could* call bidi if RTL lang (e.g. Hebrew or Arabic)
  \usepackage{polyglossia}
  \setmainlanguage[$polyglossia-lang.options$]{$polyglossia-lang.name$}
$for(polyglossia-otherlangs)$
  \setotherlanguage[$polyglossia-otherlangs.options$]{$polyglossia-otherlangs.name$}
$endfor$
\fi
$endif$
$if(dir)$
\ifxetex
  % load bidi as late as possible as it modifies e.g. graphicx
  $if(latex-dir-rtl)$
  \usepackage[RTLdocument]{bidi}
  $else$
  \usepackage{bidi}
  $endif$
\fi
\ifnum 0\ifxetex 1\fi\ifluatex 1\fi=0 % if pdftex
  \TeXXeTstate=1
  \newcommand{\RL}[1]{\beginR #1\endR}
  \newcommand{\LR}[1]{\beginL #1\endL}
  \newenvironment{RTL}{\beginR}{\endR}
  \newenvironment{LTR}{\beginL}{\endL}
\fi
$endif$
$if(natbib)$
\usepackage[$natbiboptions$]{natbib}
\bibliographystyle{$if(biblio-style)$$biblio-style$$else$plainnat$endif$}
$endif$
$if(biblatex)$
\usepackage[$if(biblio-style)$style=$biblio-style$,$endif$$for(biblatexoptions)$$biblatexoptions$$sep$,$endfor$]{biblatex}
$for(bibliography)$
\addbibresource{$bibliography$}
$endfor$
$endif$

%$if(title)$
%\title{$title$$if(thanks)$\thanks{$thanks$}$endif$}
%$endif$
%$if(subtitle)$
%\providecommand{\subtitle}[1]{}
%\subtitle{$subtitle$}
%$endif$
%$if(author)$
%\author{$for(author)$$author$$sep$ \and $endfor$}
%$endif$
%$if(institute)$
%\providecommand{\institute}[1]{}
%\institute{$for(institute)$$institute$$sep$ \and $endfor$}
%$endif$
%\date{$date$}



%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

% DOWNLOAD!
%\usepackage{datetime}
%\usepackage{titlesec}
%\usepackage{titletoc}

\usepackage[nopar]{lipsum}
\usepackage{makeidx}
\makeindex["test"]

\let\footruleskip\undefined % Trick to make memoir class work with fancyhdr
\usepackage{fancyhdr}       % http://ctan.org/pkg/fancyhdr\usepackage{fancyhdr}

\usepackage{color}
\usepackage{listings}
\newcommand{\passthrough}[1]{#1}

\setsecnumdepth{subsubsection}
\setsecheadstyle{\fontsize{15pt}{1pt}\usefont{T1}{put}{b}{n}}
\setsubsecheadstyle{\fontsize{14pt}{1pt}\usefont{T1}{put}{b}{n}}
\setsubsubsecheadstyle{\fontsize{13pt}{1pt}\usefont{T1}{put}{b}{n}}

% Traditional typography requires a larger space to indicate the end of a
% sentence. Following along the same logic, TEX puts more space after an
% exclamation point (!), and a question mark (?). However, this tradition
% is obsolete as this extra space is disturbing. So you should almost always
% execute \frenchspacing just before the beginning of every document,
% instructing TEX to treat commas and periods in the same way.
% (Latex Manual 8.6)
% -----------------------------------------------------------------------------
\frenchspacing

\setlength{\emergencystretch}{3em}  % prevent overfull lines

% Block quote
% -----------

% Footnote
% --------
% Set vertical space between bottom of page text and start of footnote.
\setfootins{8mm plus 4mm minus 2mm}{8mm plus 4mm minus 2mm}
% When first line of paragraphs are indented, this is also indented.
\renewcommand{\footnotesep}{9pt}
\makeatletter
\renewcommand\@makefntext[1]{\makebox[13pt][r]{\bfseries\@thefnmark.\,\,\,}#1}
\makeatother

% Page styles
% -----------
% Redefinition of the plain style:
\fancypagestyle{plain}{
    \fancyhf{}  % clear all header and footer fields
    \renewcommand{\headrulewidth}{0pt}
    \ifdraftdoc
    \fancyfoot[RE]{\rmfamily\small{(D)$version$}\space\space\normalsize\bfseries\thepage}
    \fancyfoot[LO]{\rmfamily\normalsize\bfseries\thepage\space\space\small\normalfont{(D)$version$}}
    \else
    \fancyfoot[LO,RE]{\rmfamily\normalsize\bfseries\thepage}
    \fi
}
\pagestyle{fancy}
\renewcommand{\headrulewidth}{0pt}
\renewcommand{\footrulewidth}{0.05pt}
\fancyhf{} % clear all header and footer fields
\renewcommand{\chaptermark}[1]{\markboth{#1}{}}
\renewcommand{\sectionmark}[1]{\markright{#1}}
\fancyfoot[LE]{\rmfamily\small\nouppercase\chaptername\space\thechapter:\space\leftmark}
\fancyfoot[RO]{\rmfamily\small\nouppercase\space{\rightmark}}
\ifdraftdoc
\fancyfoot[RE]{\rmfamily\small{(D)$version$}\space\space\normalsize\bfseries\thepage}
\fancyfoot[LO]{\rmfamily\normalsize\bfseries\thepage\space\space\small\normalfont{(D)$version$}}
\else
\fancyfoot[LO,RE]{\rmfamily\normalsize\bfseries\thepage}
\fi

% Table of contents
% -----------------
\settocdepth{subsection}
\setlength{\cftchapternumwidth}{2.3em}
\setlength{\cftsectionnumwidth}{3.9em}
\setlength{\cftsubsectionnumwidth}{5.5em}
\renewcommand{\cftchapterfont}{\large\bfseries}
\renewcommand{\cftsectionfont}{\large}
\renewcommand{\cftsubsectionfont}{\large}
\setlength{\cftbeforechapterskip}{1.0em}
\setlength{\cftbeforesectionskip}{0em}
\setlength{\cftbeforesubsectionskip}{0em}
\setlength{\cftsectionindent}{2.3em}
\setlength{\cftsubsectionindent}{6.3em}

% Chapter style
% -------------
\makechapterstyle{negerns}{
  \setlength{\beforechapskip}{0pt}
  \renewcommand*{\chapnamefont}{\raggedleft\fontsize{16.28pt}{24pt}\usefont{T1}{put}{m}{sc}}
  \renewcommand*{\chapnumfont}{\raggedleft\fontsize{24.88pt}{25pt}\usefont{T1}{put}{m}{n}\,\,}
  \renewcommand*{\chaptitlefont}{\raggedleft\fontsize{20.74pt}{25pt}\usefont{T1}{put}{b}{it}}
  \renewcommand*{\printchapternonum}{
    \vphantom{\printchaptername}
     \vphantom{\chapnumfont 1}
    \afterchapternum}
  \renewcommand*{\printchaptertitle}[1]{
    \vskip -4mm
    \hrule\vskip\onelineskip \centering\chaptitlefont ##1\\[3.0ex]}
}
\chapterstyle{negerns}
\chapterstyle{}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%



\begin{document}



% Title
% -----
$if(title)$
    \ifpdf
      \pdfbookmark{Title Page}{$title$}
    \fi
    \newlength{\centeroffset}
    \setlength{\centeroffset}{-0.5\oddsidemargin}
    \setlength{\centeroffset}{0.60\evensidemargin}
    \thispagestyle{empty}
    \vspace*{10em}
    \noindent\hspace*{\centeroffset}\makebox[0pt][l]{\begin{minipage}{\textwidth}
    \flushright
    {
        %
        % Utopia Bold appears thicker than ptm when font sizes are matched with
        % text widths.
        %
        %   {\fontfamily{ptm}\selectfont\bfseries\LARGE{$title$}\\}
        %   {\fontsize{18.5pt}{24pt}\usefont{T1}{ptm}{b}{n} {$title$}\\}
        %
        % The \usefont usage was from Fonts and Encoding chapter of the
        % The LaTeX companion, 2nd Ed, 2004, p. 371.
        {\fontsize{17.28pt}{25pt}\usefont{T1}{put}{b}{n} {$title$}\\}
        $if(subtitle)$
            %
            % Subtitle using ptm font:
            %
            %   {\fontfamily{ptm}\selectfont\bfseries\LARGE\itshape{$subtitle$}}
            %
            {\fontsize{16.28pt}{25pt}\usefont{T1}{put}{b}{it} {$subtitle$}}
        $endif$
    }
    \noindent\rule[-1ex]{\textwidth}{2pt}\\[2.8ex]
    %
    % Version and date using ptm
    %
    %   \large{$version$\\$date$\\[30ex]}
    %
    {\fontsize{12pt}{14pt}\usefont{T1}{put}{m}{n} {$version$}\\[0.2ex]$date$\\[30ex]}
    %
    % Author font using ptm
    %
    %   {\fontfamily{ptm}\selectfont\bfseries\large\itshape{$author$}\\}
    %
    
    {\fontsize{14pt}{14pt}\usefont{T1}{put}{b}{n} {$author$}\\}
    {\fontfamily{ptm}\selectfont\large{$email$}}
    %$for(author)$
    %{\fontsize{14pt}{14pt}\usefont{T1}{put}{b}{n} {$author$}\\}
    %$endfor$
    
    \end{minipage}}
    \vspace{\stretch{2}}
    \pagebreak
    %$if(abstract)$
    %    \begin{abstract}
    %    $abstract$
    %    \end{abstract}
    %$endif$
$endif$

%\pagenumbering{roman}
\frontmatter

$for(include-before)$
$include-before$
$endfor$

% Half title page
%\copyright
% Dedication page
% Other preliminaries

%
% Copyright
%
\thispagestyle{empty}
\vspace*{0em}
\noindent\hspace*{\centeroffset}\makebox[0pt][l]{\begin{minipage}{\textwidth}
\flushleft
{
    {\bfseries $title$\\}
    $if(subtitle)$
    {\bfseries\itshape $subtitle$}
    $endif$
    \normalsize $version$\\[4ex]
    \normalsize Copyright \textcopyright\space$copyrightyear$ $author$\\[1ex]
    \normalsize License: $license$\\[1ex]
    \normalsize $licensetext$\\[4ex]
    \normalsize PDF version is produced with pdfTeX-1.40.18\\[4ex]
    $if(source)$
    \normalsize $source$
    $endif$
}
\end{minipage}}
\vspace{\stretch{2}}
\pagebreak

$if(toc)$
{
$if(colorlinks)$
\hypersetup{linkcolor=$if(toccolor)$$toccolor$$else$$endif$}
$endif$
%\setcounter{tocdepth}{$toc-depth$}
\settocdepth{subsection}
\cleardoublepage
%\tableofcontents
\begin{KeepFromToc} % Hide the ToC page entry in the ToC
  \tableofcontents
\end{KeepFromToc}
\pagebreak
\cleardoublepage
}
$endif$

$if(lot)$
\listoftables
$endif$
$if(lof)$
\listoffigures
$endif$

% Longer preliminaries
% Foreword
% Introduction
%\preface
%\acknowledgements

%\pagenumbering{arabic}
\mainmatter
$body$

\appendix

\backmatter

$if(natbib)$
$if(bibliography)$
$if(biblio-title)$
$if(book-class)$
\renewcommand\bibname{$biblio-title$}
$else$
\renewcommand\refname{$biblio-title$}
$endif$
$endif$
\bibliography{$for(bibliography)$$bibliography$$sep$,$endfor$}

$endif$
$endif$
$if(biblatex)$
\printbibliography$if(biblio-title)$[title=$biblio-title$]$endif$

$endif$
$for(include-after)$
$include-after$

\printindex

$endfor$
\end{document}
